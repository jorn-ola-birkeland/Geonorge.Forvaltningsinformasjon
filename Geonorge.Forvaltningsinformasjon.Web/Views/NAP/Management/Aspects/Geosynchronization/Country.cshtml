@using Microsoft.AspNetCore.Mvc.Localization

@inject IViewLocalizer Localizer

@model Geonorge.Forvaltningsinformasjon.Web.Models.Plandata.CountiesViewModel

@{
    Layout = "../_Layout.cshtml";
    ViewData["currentTab"] = "Geosynchronization";
}

@section titleSection
{
    <div style="text-align:center">
        <h4>@Localizer["Landsoversikt"]</h4>
        <p>
            @Localizer["Antall kommuner i Norge som geosynkroniserer plandata inn til NAP: "]<strong>@Model.GeosynchIntroducedCount</strong>
        </p>
    </div>
}

@section aspectsSection
{
    <div class="col-md-6 col-md-push-6">
        <table class="table">
            <thead>
                <tr>
                    <th>@Localizer["Fylkesnr."]</th>
                    <th>@Localizer["Fylke"]</th>
                    <th>@Localizer["Kommuner som geosynkroniserer"]</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var county in Model.Counties)
                {
                    <tr>
                        <td>@county.Number</td>
                        <td><a href="/nap/info/county?id=@county.Number">@county.Name</a></td>
                        <td>@county.GeosynchIntroducedCount av @county.MunicipalityCount</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
    <div class="col-md-6 col-md-pull-6" style="top:0px;">
        <div id="r_map" style="height:600px; width:500px; border: 1px thin black;"></div>
        <table>
          <tr>
            <td><div class="square"></div></td>
            <td>&nbsp;</td>
            <td>
               Geosynkroniseringskommune
            </td>
          </tr>
        </table>
    </div>
}

@section Scripts {
    <script src="~/dist/js/map/main.js"></script>
    <script>
        var params = [];
        params.mapItems = [
            {
                'Title': 'Planregisterstatus',
                'DistributionProtocol': 'OGC:WMS',
                'GetCapabilitiesUrl': 'https://openwms.statkart.no/skwms1/wms.planregisterstatus?request=GetCapabilities&service=WMS',
                'addLayers': ['Geosynkronisering']
            }
        ];

        params.zoom = 2.8;
        params.lat = 7162299.5988298645;
        params.lon = 537500.9925542421;
        params.crs = 'EPSG:25833';

        main.map(params, document.getElementById("r_map"));
    </script>
}